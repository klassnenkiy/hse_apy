### Ссылка на развернутое в Streamlit Cloud приложение.
https://tyulyagin.streamlit.app/

[Черновой ноутбук с эксперементами](https://github.com/klassnenkiy/hse_apy/blob/main/data/note_ipynb_.ipynb)

# Проект: Анализ температурных данных и мониторинг текущей температуры

## Описание проекта

Проект представляет собой интерактивное веб-приложение на **Streamlit**, которое анализирует исторические данные о температуре и мониторит текущие температурные условия в различных городах с использованием **API OpenWeatherMap**. Приложение позволяет пользователям:

1. Загружать данные о температуре в формате CSV.
2. Выбирать город для анализа.
3. Просматривать статистику о температуре по сезонам, включая вычисление скользящего среднего и стандартного отклонения.
4. Выявлять аномалии, которые могут указывать на резкие отклонения температур от норм.
5. Получать текущую температуру для выбранного города через OpenWeatherMap API и сравнивать её с историческими данными, чтобы определить, является ли она нормальной для текущего сезона.
6. Отображать различные визуализации, такие как графики временных рядов температур, сезонные профили и аномалии.

## Ключевые особенности и функционал:

- **Генерация данных:** Приложение использует заранее заданные данные о температуре для нескольких городов, чтобы продемонстрировать аналитику и моделирование температурных колебаний. Возможность загрузки CSV файлов для анализа реальных данных.
- **Анализ данных:** Приложение рассчитывает скользящее среднее и стандартное отклонение, помогает выявить аномалии температур (отклонения за пределы средней температуры ± 2σ) и строит долгосрочные тренды изменения температур.
- **Анализ текущей температуры:** С использованием API OpenWeatherMap приложение позволяет получать актуальные данные о температуре, а затем проверяет, соответствует ли эта температура нормам для выбранного города в зависимости от сезона.
- **Мультиметодный подход:** Приложение поддерживает два метода получения текущей температуры: синхронный и асинхронный. Пользователи могут выбрать, какой метод использовать для получения данных.
- **Визуализации:** Приложение предоставляет визуализации данных с помощью библиотеки **Plotly** для анализа временных рядов температур, а также для отображения сезонных профилей и аномалий. Пользователи могут выбирать тип графика (линейный или столбчатый) и просматривать данные по выбранному периоду.

## Пример использования:

1. Пользователь загружает CSV файл с историческими данными о температуре, выбирает город и API-ключ для получения текущей температуры.
2. Приложение вычисляет статистику для выбранного города, строит график температур с выделением аномалий.
3. Пользователь может выбрать метод получения текущей температуры (синхронный или асинхронный).
4. Текущая температура проверяется на отклонения от норм для текущего сезона, и результат отображается в интерфейсе.

## Вывод и результаты:

1. **Анализ исторических данных**:
   - Приложение позволяет пользователю увидеть подробную статистику по температуре в выбранном городе, включая средние значения по сезонам, стандартные отклонения и аномалии.
   - Временной ряд температур помогает визуализировать сезонные колебания и выявить долгосрочные тренды изменения температуры.
   - Аномалии выявляются с использованием скользящего среднего и стандартного отклонения, что позволяет выделить экстремальные отклонения температуры.

2. **Мониторинг текущей температуры**:
   - Приложение успешно подключается к **OpenWeatherMap API** и отображает текущую температуру для выбранного города.
   - Сравнение текущей температуры с исторической нормой позволяет пользователю увидеть, отклоняется ли текущая температура от ожидаемой для текущего сезона.
   - Результаты отображаются в виде уведомлений, где указывается, является ли текущая температура нормальной или аномальной.

3. **Синхронные vs асинхронные запросы**:
   - В приложении реализованы как синхронные, так и асинхронные запросы для получения текущих температур.
   - **Асинхронный метод** значительно быстрее, поскольку позволяет обрабатывать несколько запросов одновременно, что полезно для анализа температур сразу по нескольким городам.
     - **Результаты эксперементов в ноутбуке**:
       - **Синхронный запрос:** Температуры: `{'Berlin': 3, 'Moscow': 1.51, 'Dubai': 17.96, 'Cairo': 15.42, 'Beijing': -3.06}`, Время: **0.5489 секунд**.
       - **Асинхронный запрос:** Температуры: `{'Berlin': 3, 'Moscow': 1.51, 'Dubai': 17.96, 'Cairo': 15.42, 'Beijing': -3.06}`, Время: **0.1091 секунд**.
   - **Вывод**: Асинхронный запрос работает значительно быстрее.

4. **Распараллеливание запросов**:
   - Приложение поддерживает распараллеливание запросов для получения текущих температур для нескольких городов одновременно.
   - **Результаты эксперементов в ноутбуке**:
     - **Без распараллеливания:** Время выполнения **0.2988 секунд**.
     - **С распараллеливанием:** Время выполнения **0.2620 секунд**.
     - **Вывод:** Результаты показывают разное время в зависимости от конкретного запуска, также в колабе доступно только один процессор, поэтому результаты нерелевантны. В деплое на больших данных расспараллеливание дает прирост в скорости работы.

5. **Визуализации**:
   - Графики и таблицы, генерируемые в приложении, дают четкое представление о температурных трендах, аномалиях и сезонных изменениях.
   - Визуализация позволяет пользователю легко воспринимать информацию и делать выводы о текущих климатических тенденциях в разных городах.

6. **Дополнительные возможности**:
    - Выбор различных типов графиков (линейный, столбчатый)
    - Настройка чувствительности для выявления аномалий
    - Сравнение температур по нескольким городам
    - Возможность скачивания отчета в Excel
    - Кэширование

## Заключение:

Этот проект предоставляет мощный инструмент для мониторинга и анализа температурных данных как в историческом контексте, так и в реальном времени с использованием API. Приложение демонстрирует эффективное использование методов обработки временных рядов, параллельных запросов и визуализации, делая сложный климатический анализ доступным и понятным для пользователей.

Проект выполнил Станислав Тюлягин
